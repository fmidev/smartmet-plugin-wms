{
    "title": "Ice map",
    "abstract": "Ice map polygons",
    "defs":
    {
    },
    "views": 
    [
        {
	    "attributes":
	    {
		"id": "view1"
	    },
            "layers": 
	    [
		{ // jääalueet
		    "qid": "icemap_areas",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "seaice",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "where": "type=1",
			    "attributes":
			    {
				"class": "OpenWater"
			    }
			},
			{
			    "where": "type=2",
			    "attributes":
			    {
				"class": "VeryOpenIce"
			    }
			},
			{
			    "where": "type=3",
			    "attributes":
			    {
				"class": "OpenIce"
			    }
			},
			{
			    "where": "type=4",
			    "attributes":
			    {
				"class": "CloseIce"
			    }
			},
			{
			    "where": "type=9",
			    "attributes":
			    {
				"class": "NewIce"
			    }
			},
			{
			    "where": "type=5",
			    "attributes":
			    {
				"class": "VeryCloseIce"
			    }
			},
			{
			    "where": "type=7",
			    "attributes":
			    {
				"class": "LevelIce"
			    }
			},
			{
			    "where": "type=6",
			    "attributes":
			    {
				"class": "ConsolidatedIce"
			    }
			},
			{
			    "where": "type=10",
			    "attributes":
			    {
				"class": "RottenFastIce"
			    }
			},
			{
			    "where": "type=8",
			    "attributes":
			    {
				"class": "FastIce"
			    }
			},
			{
			    "where": "type=0",
			    "attributes":
			    {
				"class": "IceFree"
			    }
			}
		    ]
		},
		{ // jään reuna
		    "qid": "ice_edge",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icelne",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "IceEdge"
			    }
			}
		    ]
		},
		{ // arvioitu jään reuna
		    "qid": "ice_edge",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "estimatediceedgesymbol",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "EstimatedIceEdge"
			    }
			}
		    ]
		},
		{ // lämpötilakäyrät
		    "qid": "temperature_isotherm",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "sst",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "TemperatureIsoline"
			    }
			}
		    ]
		},
		{ // maa-aluemaski
		    "qid": "icemap_landmask",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap_static",
		    "table" : "landmask",
		    "geometry_column" : "geom",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "IceMapLandMask"
			    }
			}
		    ]
		},
		{ // koordinaattiruudukko: ladataan suoraan kannasta
		    "qid": "coordinate_grid",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap_static",
		    "table" : "coordinate_grid",
		    "geometry_column" : "geom",
            	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "CoordinateLine"
			    }
			}
		    ]
		},
		{ // lämpötilakäyrien labelit
		    "qid": "temperature_isotherm_labels",
		    "layer_type": "icemap",
		    "layer_subtype": "temperature_isotherm_label",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "sstannotations",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
		    "labeltext_column" : "textstring",
		    "fontname_column" : "fontname",
		    "fontsize_column" : "fontsize",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "where": "textstring IS NOT NULL and length(textstring) > 0",
			    "attributes":
			    {
				"class": "TemperatureIsolineLabel"
			    },
			    "text_attributes":
			    {
				"font-family": "Arial",
				"font-size": "18",
				"font-style": "normal",
				"font-weight": "normal",
				"text-anchor": "start"
			    }

			}
		    ]
		},
		{ // päällekkäin ajautunut jää
		    "qid": "rafted_ice",
		    "layer_type": "icemap",
		    "layer_subtype": "symbol",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icerft",
		    "symbol": "icerft",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			}
		    ]
		},
		{ // ahtojää- tai röykkiölautta
		    "qid": "flbrg",
		    "layer_type": "icemap",
		    "layer_subtype": "symbol",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "flobrg",
		    "symbol": "flobrg",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			}
		    ]
		},
		{ // ahtautunut tai röykkiöitynyt jää
		    "qid": "icerdg",
		    "layer_type": "icemap",
		    "layer_subtype": "symbol",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icerdg",
		    "symbol": "icerdg",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			}
		    ]
		},
		{ // sohjovyö
		    "qid": "jmdbrr",
		    "layer_type": "icemap",
		    "layer_subtype": "symbol",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "jmdbpt",
		    "symbol": "jmdbrr",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			}
		    ]
		},
		{ // repeämävyöhyke
		    "qid": "farcture_zone",
		    "layer_type": "icemap",
		    "layer_subtype": "symbol",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icefra",
		    "symbol": "icefra_zone",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			}
		    ]
		},
		{ // repeämä
		    "qid": "fracture",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "i_fral",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "Fracture"
			    }
			}
		    ]
		},
		{ // jään liikesuunta
		    "qid": "icedft",
		    "layer_type": "icemap",
		    "layer_subtype": "symbol",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icedft",
		    "symbol": "icedft",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			}
		    ]
		},
		{ // puristus
		    "qid": "icecom",
		    "layer_type": "icemap",
		    "layer_subtype": "degree_of_pressure",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icecom",
		    "symbol": "icecom",
		    "geometry_column" : "geom",
		    "labeltext_column" : "iceprs",
		    "time_column" : "publicationdate",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			    "attributes":
			    {
			    },
			    "text_attributes":
			    {
				"font-family": "Arial", // override database font
				"font-size": "10",
				"dx": "-9",
				"dy": "13",
				"font-style": "normal",
				"font-weight": "normal",
				"text-anchor": "start"
			    }
			}
		    ]
		},
		{ // keskilämpötila
		    "qid": "mean_temperature",
		    "layer_type": "icemap",
		    "layer_subtype": "mean_temperature",
		    "pgname": "icemap",
		    "schema" : "icemap_static",
		    "table" : "watermeantemp",
		    "geometry_column" : "geom",
		    "labeltext_column" : "o_DD_o_MM_o", // DD and MM are replaced in the query with requested day and month
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"class": "MeanTemperature"
			    },
			    "text_attributes":
			    {
				"font-family": "Arial",
				"font-size": "10",
				"dx": "-5"
			    }
			}
		    ]
		},
		{ // satamat
		    "qid": "harbours",
		    "layer_type": "icemap",
		    "layer_subtype": "named_location",
		    "pgname": "icemap",
		    "schema" : "icemap_static",
		    "table" : "harbours",
		    "symbol": "harbour",
		    "geometry_column" : "geom",
		    "firstname_column" : "text1",
		    "secondname_column" : "text2",
		    "labelposition_column" : "label_location",
              	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
 			    "attributes":
			    {
				"font-family": "Times",
				"font-size": "10",
				"font-style": "normal",
				"font-weight": "normal",
 				"text-anchor": "start"
			    }
 			}
		    ]
		},
		{ // majakat
		    "qid": "lighthouses",
		    "layer_type": "icemap",
		    "layer_subtype": "named_location",
		    "pgname": "icemap",
		    "schema" : "icemap_static",
		    "table" : "lighthouses",
		    "symbol": "lighthouse",
		    "geometry_column" : "geom",
		    "firstname_column" : "namnavaid1",
		    "secondname_column" : "namnavaid2",
		    "labelposition_column" : "label_location",
		    "angle_column" : "angle",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "attributes":
			    {
				"font-family": "Arial",
				"font-size": "10",
				"font-style": "normal",
				"font-weight": "normal",
				"text-anchor": "start"
			    }
 			}
		    ]
		},
		{ // jään paksuuslaatikon yhdysviiva
		    "qid": "ice_thickness_leader",
		    "layer_type": "icemap",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "annotationleaders",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",	
              	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "where": "ref_classname='SeaiceAnnotation' and shape_length > 0",
			    "attributes":
			    {
				"class": "TemperatureIsoline"
			    }
  			}
		    ]
		},
		{ // jään paksuus
		    "qid": "ice_thickness",
		    "layer_type": "icemap",
		    "layer_subtype": "ice_thickness_label",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "seaiceannotation",
		    "geometry_column" : "geom",
		    "time_column" : "publicationdate",	
		    "labeltext_column" : "textstring",
		    "fontname_column" : "fontname",
		    "fontsize_column" : "fontsize",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "where": "textstring IS NOT NULL and length(textstring) > 0",
			    "attributes":
			    {
				"class": "IceThicknessLegend"
			    },
 			    "text_attributes":
			    {
// here you can override text attributes read from database
//				"font-family": "Times",
//				"font-size": "8"
//				"font-style": "normal",
//				"font-weight": "normal"
			    }
 			}
		    ]
		},
		{ // jäänmurtajat
		    "qid": "ice_breakers",
		    "layer_type": "icemap",
		    "layer_subtype": "ice_breaker_label",
		    "pgname": "icemap",
		    "schema" : "icemap",
		    "table" : "icebreakers",
		    "time_column" : "publicationdate",	
		    "geometry_column" : "geom",
		    "labeltext_column" : "textstring",
		    "fontname_column" : "fontname",
		    "fontsize_column" : "fontsize",
             	    "css": "ice/icemap.css",
		    "filters" :		    
		    [			
			{
			    "where": "textstring IS NOT NULL and length(textstring) > 0",
			    "attributes":
			    {
				"class": "IceBreakerLegend"
			    },
			    "text_attributes":
			    {
				"font-family": "Arial", // override database font
				"font-size": "18",
				"font-style": "normal",
				"font-weight": "normal",
				"text-anchor": "start"
			    }
			}
		    ]
		},
		{ // kartan merkkien selitykset
		    "qid": "legend-1",
		    "tag": "g",
             	    "css": "ice/icemap.css",
		    "layers": "json:ice/icemap_legend1.json",
		    "attributes":
		    {
				"font-family": "Arial",
				"font-size": "10",
				"font-style": "normal",
				"font-weight": "normal",
				"text-anchor": "start"
		    }
		}
	    ]
	}
    ]
}

