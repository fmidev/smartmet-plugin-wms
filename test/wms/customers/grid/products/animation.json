{
  "title"     : "Animation demo",
  "abstract"  : "Demonstration of some animation features",
  "source"    : "grid",
  "producer"  : "ec",

  "animation" :
  {
    "enabled"           : true,   // Enables/disables the animation
    "timesteps"         : 1,      // Number of animation timesteps
    "timestep_interval" : 90,     // Frame interval time (= milliseconds) between timesteps
    "data_timestep"     : 20,     // Timestep length (= minutes)in in the actual data
    "loopsteps"         : 15,     // Number of animation steps inside the same timestep
    "loopstep_interval" : 70      // Frame interval time (=milliseconds) between loopsteps
  },

  "projection": {},
  "views": [
    {
      "layers":
      [
        {
          // ************************************************************
          //  Temperature
          // ************************************************************
          //  This demonstrates the usage of the "default" data painter,
          //  which paints data values according to color definitions
          //  specified in the "colormap" file.
          // ************************************************************

          "layer_type"            : "raster",
          "qid"                   : "temperature-1",
          "compression"           : 1,
          "visible"               : true,
          "parameter"             : "temperature",
          "interpolation"         : "linear",
          "data_painter"          : "default",
          "data_opacity_land"     : 1.0,
          "data_opacity_sea"      : 1.0,
          "colormap"              : "temperature",
          "smooth_colors"         : true,

          "land_position"         : "bottom",
          "land_color"            : "FFD0D0D0",

          "sea_position"          : "top",
          "sea_color"             : "FFCCE0F8",

          "land_border_position"  : "none",
          "land_border_color"     : "80000000",
          "sea_border_color"      : "80FFFFFF",

          "land_shading_position" : "top",
          "land_shading_light"    : 128,
          "land_shading_shadow"   : 384,

          "sea_shading_position"  : "none",
          "sea_shading_light"     : 128,
          "sea_shading_shadow"    : 384
        }
        ,
        {
          // ************************************************************
          //  Wind speed isobands
          // ************************************************************
          //  This demonstrates the usage of the "default" data painter,
          //  which paints data values according to color definitions
          //  specified in the "colormap" file.
          // ************************************************************

          "layer_type"            : "raster",
          "qid"                   : "windspeed-colors-1",
          "visible"               : true,
          "compression"           : 1,
          "parameter"             : "WindSpeedMS",
          "interpolation"         : "linear",
          "data_painter"          : "default",
          "data_opacity_land"     : 0.0,
          "data_opacity_sea"      : 0.3,
          "colormap"              : "windspeed",
          "smooth_colors"         : true,

          "land_position"         : "none",
          "land_color"            : "FF404040",

          "sea_position"          : "bottom",
          "sea_color"             : "FFFFFFFF",

          "land_border_position"  : "top",
          "land_border_color"     : "80000000",
          "sea_border_color"      : "80FFFFFF",

          "land_shading_position" : "none",
          "land_shading_light"    : 256,
          "land_shading_shadow"   : 384,

          "sea_shading_position"  : "none",
          "sea_shading_light"     : 128,
          "sea_shading_shadow"    : 384
        }
        ,
        {
          // ************************************************************
          //  Wind speed streams
          // ************************************************************
          //  This demonstrates the usage of the "stream" data painter,
          //  which paints stream lines according to color definitions
          //  specified in the "colormap" file. The current painter is
          //  also an animation painter, which means that it can paint
          //  stream lines differently in all animation loopsteps. It
          //  can also animate stream lines so that they look to have
          //  different speeds according to their speed data values.
          //  in this case there must be a list of speed ranges with
          //  minimum and maximum data values. Notice that the line
          //  colors comes from the colormap file also in this case.
          // ************************************************************

          "layer_type"            : "raster",
          "qid"                   : "wind-streams-1",
          "visible"               : true,
          "compression"           : 1,
          "direction"             : "WindDirection",
          "speed"                 : "WindSpeedMS",
          "data_painter"          : "stream",
          "data_opacity_land"     : 0.0,
          "data_opacity_sea"      : 0.7,

          "stream" :
          {
            "trace_step_x"        : 10,
            "trace_step_y"        : 10,
            "trace_length_min"    : 10,
            "trace_length_max"    : 180,
            "line_length"         : 20,
            "colormap"            : "windspeed",

            "speeds" : [
              {"speed":0.5,  "value_min":0,  "value_max":3},
              {"speed":1.0,  "value_min":3,  "value_max":5},
              {"speed":2.0,  "value_min":5,  "value_max":7},
              {"speed":2.0,  "value_min":7,  "value_max":10},
              {"speed":3.0,  "value_min":10, "value_max":14},
              {"speed":4.0,  "value_min":14, "value_max":20},
              {"speed":5.0,  "value_min":20, "value_max":100}
            ]
          }
          ,
          "land_position"         : "none",
          "land_color"            : "FF808080",

          "sea_position"          : "none",
          "sea_color"             : "FFFFFFFF",

          "land_border_position"  : "none",
          "land_border_color"     : "80000000",
          "sea_border_color"      : "80FFFFFF",

          "land_shading_position" : "none",
          "land_shading_light"    : 256,
          "land_shading_shadow"   : 256,

          "sea_shading_position"  : "none",
          "sea_shading_light"     : 128,
          "sea_shading_shadow"    : 384
        }
        ,
        {
          // ************************************************************
          //  High clouds 
          // ************************************************************
          //  This demonstrates the usage of the "range" data painter,
          //  which is almost the same as the "default" data painter. The
          //  main diffence is that it does not have colormaps, but it
          //  defines similar color ranges in the "ranges" array. In 
          //  addition it can define colors that are outside of the given
          //  range (color_low,color_high). This is a fast way to define
          //  colors for data that does not require many color ranges.
          //
          //  Notice that in this example we use interpolation method
          //  "transfer" that tries to calculate cloud transitions
          //  with a different algorithm (i.e. it does not use linear
          //  interpolation. The same algorithm can be used with rain.
          // ************************************************************

          "layer_type"            : "raster",
          "qid"                   : "high-clouds-1",
          "visible"               : false,
          "compression"           : 1,
          "parameter"             : "NH-PRCNT:ECGMTA:1008:6:0:1",
          "interpolation"         : "transfer",
          "data_painter"          : "range",
          "data_opacity_land"     : 1.0,
          "data_opacity_sea"      : 1.0,

          "ranges" : [
            {
              "value_min"         : 10,
              "value_max"         : 100,
              "color_min"         : "20FFFFFF",
              "color_max"         : "FFFFFFFF",
              "color_low"         : "00000000",
              "color_high"        : "00000000"
            }
          ]
          ,
          "data_shadows" : [
            {
              "value_min"         : 20,
              "value_max"         : 100,
              "color_min"         : "30000000",
              "color_max"         : "30000000",
              "dx"                : 5,
              "dy"                : 5
            }
          ]
          ,
          "land_position"         : "none",
          "land_color"            : "FF404040",

          "sea_position"          : "none",
          "sea_color"             : "FFCCE0F8",

          "land_border_position"  : "top",
          "land_border_color"     : "20000000",
          "sea_border_color"      : "20FFFFFF",

          "land_shading_position" : "none",
          "land_shading_light"    : 256,
          "land_shading_shadow"   : 384,

          "sea_shading_position"  : "none",
          "sea_shading_light"     : 128,
          "sea_shading_shadow"    : 384
        }
        ,
        {
          // ************************************************************
          //  Precipitation
          // ************************************************************
          //  This demonstrates the usage of the "default" data painter,
          //  which paints data values according to color definitions
          //  specified in the "colormap" file.
          // 
          //  It also demonstates the usage of shadows that are calculate
          //  from the same data. The idea is that shadows are painted
          //  if they are in the given interval. In this case the actual
          //  shadow color is scaled according to the given color interval.
          //  Usually shadow is created by using black color with some
          //  tranparency (i.e. the color range is given in ARGB).
          // ************************************************************

          "layer_type"            : "raster",
          "qid"                   : "precipitation-1",
          "visible"               : false,
          "compression"           : 1,
          "parameter"             : "RRR-KGM2",
          "interpolation"         : "transfer",
          "data_painter"          : "default",
          "data_opacity_land"     : 0.7,
          "data_opacity_sea"      : 0.7,
          "colormap"              : "precipitation",
          "data_shadows" : [
            {
              "value_min"         : 0.2,
              "value_max"         : 100.0,
              "color_min"         : "50000000",
              "color_max"         : "50000000",
              "dx"                : 5,
              "dy"                : 5
            }
          ]
          ,
          "land_position"         : "none",
          "land_color"            : "FF808080",

          "sea_position"          : "none",
          "sea_color"             : "FFCCE0F8",

          "land_border_position"  : "none",
          "land_border_color"     : "20000000",
          "sea_border_color"      : "20FFFFFF",

          "land_shading_position" : "none",
          "land_shading_light"    : 128,
          "land_shading_shadow"   : 384,

          "sea_shading_position"  : "none",
          "sea_shading_light"     : 128,
          "sea_shading_shadow"    : 384
        }
        ,
        {
          // ************************************************************
          //  Pressure isolines
          // ************************************************************
          //  This demonstrates the usage of the "border" data painter,
          //  which paints borders inside and outside of the given data
          //  area. There can be multiple border defintions and it is
          //  also possible to define multiple borders with a singe 
          //  border definition. In this case there should be number
          //  of steps and "step_increase" value that define how much
          //  the "inside_value_min" is changed between each step. 
          // ************************************************************

          "layer_type"            : "raster",
          "qid"                   : "pressure-1",
          "visible"               : true,
          "compression"           : 1,
          "parameter"             : "P-PA",
          "interpolation"         : "linear",
          "data_painter"          : "border",
          "data_opacity_land"     : 0.5,
          "data_opacity_sea"      : 1.0,

          "borders" : [
            {
              "inside_value_min"  : 97000,
              "inside_color"      : "A0000000",
              "outside_color"     : "FFFFFFFF",
              "steps"             : 150,
              "step_increase"     : 80
            }
          ]
          ,
          "land_position"         : "none",
          "land_color"            : "FF808080",

          "sea_position"          : "none",
          "sea_color"             : "FFCCE0F8",

          "land_border_position"  : "none",
          "land_border_color"     : "20000000",
          "sea_border_color"      : "20FFFFFF",

          "land_shading_position" : "none",
          "land_shading_light"    : 128,
          "land_shading_shadow"   : 384,

          "sea_shading_position"  : "none",
          "sea_shading_light"     : 128,
          "sea_shading_shadow"    : 384
        }
        ,
        {
          // ************************************************************
          //  Group
          // ************************************************************
          //  This demonstrates the usage of the group layer. This is 
          //  an easy way to group different layers together. In this
          //  example we have white box and time layer in the same group,
          //  but this is also useful for example when using isolabels
          //  and isolines, because they depend on each other.
          //
          //  Notice that in this case the "visible" attributes controls 
          //  the visibility of the all group layers.
          // ************************************************************

          "layer_type"            : "group",
          "qid"                   : "time-box-1",
          "visible"               : true,
          "layers": 
          [        
	        {
	          "tag"               : "rect",
	          "qid"               : "rectangle-1",
	          "attributes":
	          {
	            "x"               : -168,
	            "y"               : 3,
	            "width"           : 155,
	            "height"          : 25,
	            "rx"              : 8,
	            "ry"              : 8,
	            "fill"            : "white",
	            "stroke"          : "black",
	            "stroke-width"    : "0.6"
	          }
	        },
	        {
	          "layer_type"        : "time",
	          "qid"               : "time-1",
	          "timestamp"         : "validtime",
	          "timezone"          : "Europe/Helsinki",
	          "format"            : "%Y-%m-%d %H:%M",
	          "x"                 : -20,
	          "y"                 : 20,
	          "attributes":
	          {
	            "text-anchor"     : "end",
	            "font-family"     : "Roboto",
	            "font-weight"     : "bold",
	            "font-size"       : 14
	          }
	        }
	      ]
	    }
      ]
    }
  ]
}
